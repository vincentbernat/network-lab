#/etc/sysctl.d/99cumulus_defaults.conf
#Place this file on the ubuntu12.04,ubuntu 14.04, ubuntu 16.04, RHEL device and restart

#Required if we're to work as a router
net.ipv4.conf.all.rp_filter = 0
net.ipv4.conf.default.rp_filter = 0
net.ipv4.conf.lo.rp_filter = 0

net.ipv4.conf.all.forwarding = 1
net.ipv4.conf.default.forwarding = 1
net.ipv4.ip_forward = 1

net.ipv4.conf.default.arp_announce = 2
net.ipv4.conf.default.arp_notify = 1
net.ipv4.conf.default.arp_ignore=1
net.ipv4.conf.all.arp_announce = 2
net.ipv4.conf.all.arp_notify = 1
net.ipv4.conf.all.arp_ignore=1

net.ipv4.icmp_errors_use_inbound_ifaddr=1

# igmp
net.ipv4.igmp_max_memberships=1000
net.ipv4.neigh.default.mcast_solicit = 10

# mld
net.ipv6.mld_max_msf=512

# neigh
net.ipv4.neigh.default.gc_thresh2=7168
net.ipv4.neigh.default.gc_thresh3=8192
net.ipv4.neigh.default.base_reachable_time_ms=14400000
net.ipv6.neigh.default.gc_thresh2=3584
net.ipv6.neigh.default.gc_thresh3=4096
net.ipv6.neigh.default.base_reachable_time_ms=14400000

# Routes
net.ipv6.route.max_size=131072
net.ipv4.conf.all.ignore_routes_with_linkdown=1
net.ipv6.conf.all.ignore_routes_with_linkdown=1
# keep ipv6 permanent addresses on an admin down
net.ipv6.conf.all.keep_addr_on_down=1
# use neigh information on selection of nexthop for multipath hops
net.ipv4.fib_multipath_use_neigh=1

net.core.rmem_max = 8388608
net.core.wmem_max = 8388608
net.core.optmem_max = 65536
net.core.rmem_default = 266240
net.core.wmem_default = 266240
